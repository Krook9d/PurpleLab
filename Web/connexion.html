<html lang="en">
<head>
    <link rel="icon" href="/MD_image/logowhiteV3.png" type="image/png">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PurpleLab - Login</title>
    <link rel="stylesheet" href="css/main.css?v=5.2">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body class="blank">
    <div id="logo-container">
       <img src="/MD_image/Logotest.png" alt="PurpleLab Logo" />
    </div>
    
    <div class="body-container">
        <div class="background-image-section"></div>
        
        <div class="form-section">
            <div id="form-container">
                <form action="authenticate.php" method="post">
                    <h1>Hello,</h1> 
                    <p>Sign in to start your session</p>
                    
                    <div class="input-container">
                        <input type="email" id="email" name="email" placeholder="Email" required>
                        <svg class="input-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12,2A10,10,0,1,0,22,12,10,10,0,0,0,12,2Zm0,3a3,3,0,1,1-3,3A3,3,0,0,1,12,5Zm0,14.2a7.2,7.2,0,0,1-6-3.1,5.61,5.61,0,0,1,12,0A7.2,7.2,0,0,1,12,19.2Z"/>
                        </svg>
                    </div>
                    
                    <div class="input-container"> 
                        <input type="password" id="password" name="password" placeholder="Password" required>
                        <svg class="input-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M18,8h-1V6A5,5,0,0,0,7,6V8H6a2,2,0,0,0-2,2V20a2,2,0,0,0,2,2H18a2,2,0,0,0,2-2V10A2,2,0,0,0,18,8ZM9,6a3,3,0,0,1,6,0V8H9Z"/>
                        </svg>
                    </div>
                    
                    <div class="button-container">
                        <input type="submit" class="login-button" value="Login">
                        <button type="button" id="create-account-button" class="register-button">Register</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <div id="credit-container">
        <a href="https://github.com/Krook9d" target="_blank" id="credit-link">
            <img src="https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png" alt="GitHub Icon"/> 
            Made by Krook9d
        </a>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', (event) => {
            const createAccountButton = document.getElementById('create-account-button');
            const logoContainer = document.getElementById('logo-container');
            const formContainer = document.getElementById('form-container');
    
            createAccountButton.addEventListener('click', (e) => {
                e.preventDefault();
                
                // Hide logo immediately
                logoContainer.style.display = 'none';
                
                // Change form content immediately
                formContainer.innerHTML = `
                    <div class="register-container">
                        <form action="register.php" method="post" enctype="multipart/form-data">
                            <h1 class="register-form-title">üìù Registration</h1>
                            
                            <div class="register-input-container">
                                <label for="firstName"><b>First Name:</b></label>
                                <input type="text" id="firstName" name="firstName" class="register-input" required>
                            </div>
                            
                            <div class="register-input-container">
                                <label for="lastName"><b>Last Name:</b></label>
                                <input type="text" id="lastName" name="lastName" class="register-input" required>
                            </div>
                            
                            <div class="register-input-container">
                                <label for="email"><b>Email:</b></label>
                                <input type="email" id="email" name="email" class="register-input" required>
                            </div>
                            
                            <div class="register-input-container">
                                <label for="analystLevel"><b>Analyst Level:</b></label>
                                <select id="analystLevel" name="analystLevel" class="register-select" required>
                                    <option value="">Select your level</option>
                                    <option value="N1">N1 - Beginner</option>
                                    <option value="N2">N2 - Intermediate</option>
                                    <option value="N3">N3 - Expert</option>
                                </select>
                            </div>
                            
                            <div class="register-file-input">
                                <label for="avatar"><b>Avatar:</b></label>
                                <div class="input-file-container">
                                    <span class="register-file-trigger">Select a file...</span>
                                    <input type="file" id="avatar" name="avatar" class="input-file" accept="image/png, image/jpeg, image/jpg" required>
                                </div>
                            </div>
                            
                            <div class="register-input-container">
                                <label for="password"><b>Password:</b></label>
                                <input type="password" id="password" name="password" class="register-input" required>
                                <button type="button" id="show-password-button" class="password-icon">
                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M12,9A3,3,0,0,0,9,12a3,3,0,0,0,3,3,3,3,0,0,0,3-3A3,3,0,0,0,12,9ZM12,17a5,5,0,0,1-5-5,5,5,0,0,1,5-5,5,5,0,0,1,5,5A5,5,0,0,1,12,17ZM12,5c-7,0-10,7-10,7s3,7,10,7,10-7,10-7S19,5,12,5Z"/>
                                    </svg>
                                </button>
                                <span id="password-message" class="register-password-message"></span>
                            </div>
                            
                            <div class="button-container">
                                <input type="submit" value="Register" class="register-button">
                                <button type="button" onclick="location.href='connexion.html';" class="login-button">Go back</button>
                            </div>
                        </form>
                    </div>
                `;
                
                // Reinitialize event handlers
                setupFileInput();
                setupPasswordToggle();
                setupPasswordValidation();
            });
            
            // Function to setup file input
            function setupFileInput() {
                const fileInput = document.getElementById('avatar');
                const fileTrigger = document.querySelector('.register-file-trigger');
                
                if (fileInput && fileTrigger) {
                    fileInput.addEventListener('change', function(e) {
                        if (e.target.files.length > 0) {
                            let fileName = e.target.files[0].name;
                            if (fileName.length > 25) {
                                fileName = fileName.substring(0, 25) + '...';
                            }
                            fileTrigger.textContent = fileName;
                            fileTrigger.style.background = 'var(--primary-gradient)';
                        }
                    });
                }
            }
            
            // Function to setup password toggle
            function setupPasswordToggle() {
                const passwordInput = document.getElementById('password');
                const showPasswordButton = document.getElementById('show-password-button');
                
                if (passwordInput && showPasswordButton) {
                    showPasswordButton.addEventListener('click', () => {
                        if (passwordInput.type === 'password') {
                            passwordInput.type = 'text';
                            showPasswordButton.innerHTML = `
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M12,7A5,5,0,0,1,17,12a5,5,0,0,1-5,5A5,5,0,0,1,7,12,5,5,0,0,1,12,7ZM12,9a3,3,0,0,0-3,3,3,3,0,0,0,3,3,3,3,0,0,0,3-3A3,3,0,0,0,12,9ZM2,12s3-7,10-7,10,7,10,7-3,7-10,7S2,12,2,12ZM12,5C7,5,3.73,9.11,2.46,12,3.73,14.89,7,19,12,19s8.27-4.11,9.54-7C20.27,9.11,17,5,12,5Z"/>
                                    <line x1="1" y1="1" x2="23" y2="23" stroke="currentColor" stroke-width="2"/>
                                </svg>
                            `;
                        } else {
                            passwordInput.type = 'password';
                            showPasswordButton.innerHTML = `
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M12,9A3,3,0,0,0,9,12a3,3,0,0,0,3,3,3,3,0,0,0,3-3A3,3,0,0,0,12,9ZM12,17a5,5,0,0,1-5-5,5,5,0,0,1,5-5,5,5,0,0,1,5,5A5,5,0,0,1,12,17ZM12,5c-7,0-10,7-10,7s3,7,10,7,10-7,10-7S19,5,12,5Z"/>
                                </svg>
                            `;
                        }
                    });
                }
            }
            
            // Function to setup password validation
            function setupPasswordValidation() {
                const passwordInput = document.getElementById('password');
                const passwordMessage = document.getElementById('password-message');
                
                if (passwordInput && passwordMessage) {
                    passwordInput.addEventListener('input', () => {
                        const password = passwordInput.value;
                        const regex = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/;
                        
                        if (password.length === 0) {
                            passwordMessage.textContent = '';
                            passwordMessage.style.background = 'transparent';
                        } else if (regex.test(password)) {
                            passwordMessage.textContent = '‚úì Password is valid';
                            passwordMessage.style.color = '#10b981';
                            passwordMessage.style.background = 'rgba(16, 185, 129, 0.1)';
                        } else {
                            passwordMessage.textContent = 'Password must contain at least 8 characters, including at least one uppercase letter, one lowercase letter, one number and one special character';
                            passwordMessage.style.color = '#ef4444';
                            passwordMessage.style.background = 'rgba(239, 68, 68, 0.1)';
                        }
                    });
                }
            }
        });
    </script>
</body>
</html>
